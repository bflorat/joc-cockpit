
<div class="navbar box-shadow-z0 p-l-0 p-r-20">
    <a data-toggle="collapse" data-target="#navbar1" class="navbar-item pull-right hide-menubar m-a-0 m-l">
        <i class="fa fa-navicon text-white"></i>
    </a>
    <!-- brand -->
    <a class="navbar-brand white ">
        <img src="images/jobscheduler-logo.png" alt=".">
    </a>
    <!-- / brand -->

    <!-- nabar right -->
    <ul class="nav navbar-nav pull-right ">
        <li class="nav-item dropdown">
            <a class="nav-link text-white" data-toggle="dropdown">
             <span class="avatar w-32">
                <letter-avatar shape="round" width="30" height="30" data="{{username}}"></letter-avatar>
              </span>
              <span class="text-left p-l-xs">
                    <span class="_500 text-md" ng-bind="username"></span>
                    <i class="fa fa-caret-down p-l-xs"></i>
              </span>
            </a>
            <div class="dropdown-menu pull-right dropdown-ac">
                <a class="dropdown-item" ui-sref="app.profile">
                    <s class="fa fa-user"></s>
                    {{'button.profile' | translate}}
                </a>
                <a class="dropdown-item" ui-sref="app.setting">
                    <i class="fa fa-cog"></i>
                    {{'button.setting' | translate}}
                </a>
                <a class="dropdown-item" ng-click="logout();$event.stopPropagation()">
                    <i class="fa fa-sign-out"></i>
                    {{'button.logOut' | translate}}
                </a>
            </div>
        </li>
    </ul>
    <!-- / navbar right -->

    <ul class="nav navbar-nav pull-right p-r">
        <li class="nav-item dropdown p-r-xs">
            <a class="nav-link text-white" data-toggle="dropdown" ng-click="updateAllEvent(allSessionEvent)">
                <span class="text-left p-l-xs">
                   <span class="label label-sm up notification" ng-if="allSessionEvent.eventUnReadCount>0"
                         ng-bind="allSessionEvent.eventUnReadCount"></span>
                    <i class="fa fa-lg fa-bell-o fa-grey"></i>

              </span>
            </a>
            <div class="dropdown-menu pull-right dropdown-ac" id="notification" ng-init="showEvent=false">
                <div class="scrollable" style="max-height: 300px;width: 680px ;margin-left: 0;padding-top:10px">
                    <div>
                        <div class="col-sm-6" ng-if="showEvent==false || showEvent==undefined">
                            <h5 style="padding-top: 7px; margin-bottom: 0"><span translate>label.notifications </span></h5>
                        </div>
                        <div class="col-sm-6 cursor" ng-click="collapseNotification()" ng-if="showEvent==true">
                            <h5 style="padding-top: 7px; margin-bottom: 0"><i class=" fa fa-angle-left "></i>
                                <span translate>label.backToNotifications </span></h5>
                        </div>
                        <div class="col-sm-6 ">
                            <div class="btn-group m-l-sm pull-right" ng-if="showEvent==false || showEvent==undefined">
                                <button class="btn btn-grey btn-sm btn-primary active"  ng-click="makeAllGroupEventRead(allSessionEvent)"
                                          translate>button.markAllAsRead
                                </button>
                            </div>
                            <div class="btn-group m-l-sm pull-right" ng-if="showEvent==true">
                                <button class="btn btn-grey btn-sm btn-primary active"  ng-click="makeAllEventRead(allSessionEvent,showGroupEvent)" translate>button.markAllAsRead
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div style="max-height: 300px; overflow: auto">
                    <table class="table-hover" style="margin-left: 16px; margin-bottom: 12px; width: 94%">
                        <tbody>
                        <tr ng-repeat="group in allSessionEvent.group | orderBy:'-eventId'">
                            <td ng-click="expandNotification(group)" class="cursor" ng-show="!showEvent">
                                <span>
                                    <span class="_600" ng-if="group.readCount>9">{{group.readCount}}</span>
                                    <span class="_600" ng-if="group.readCount<9">0{{group.readCount}}</span>
                                    new events on <span class="text-black-dk">{{group.jobschedulerId}}</span>
                                    <span class="text-capitalize">{{group.objectType | lowercase}}:</span>
                                    <span class="text-primary">{{group.path}}</span>
                                    <span class="text-muted" time1="{{group.eventId/1000}}"></span>
                                </span>
                                <i class="cursor  fa fa-angle-right"></i>

                            </td>
                        </tr>
                        <tr ng-if="showEvent==true">
                            <td style="font-size: 14px;padding-bottom: 6px">
                                <span class="text-capitalize">{{showGroupEvent.objectType | lowercase}}</span>
                                {{showGroupEvent.path}}
                                <span class="_600">{{showGroupEvent.readCount}}</span>
                            </td>
                        </tr>
                        <tr ng-repeat="value in showGroupEvent.events | orderBy:'-eventId' track by $index" ng-if="showEvent==true" style="margin-top: 10px">
                            <td>
                                <span class="cursor p-l p-r" ng-if="value.read==false" ng-click="readEvent(showGroupEvent,value,allSessionEvent)">
                                    <i class="fa fa-angle-right text-orange _600 fa-lg" ng-if="value.navigate"></i>
                                    <span class="text-capitalize">{{value.objectType | lowercase}}:</span>
                                    <span class="text-primary">{{value.path}}</span>
                                    {{value.eventType}}
                                    <span class="text-muted">{{(value.eventId/1000) | stringToDate}}</span>

                                </span>
                                <span class="p-l p-r text-black-lt" ng-if="value.read==true">
                                    <i class="fa fa-angle-right text-orange _600 fa-lg" ng-if="value.navigate"></i>
                                    <span class="text-capitalize">{{value.objectType | lowercase}}:</span>
                                    <span class="text-primary">{{value.path}}</span>
                                    {{value.eventType}}
                                    <span class="text-muted">{{(value.eventId/1000) | stringToDate}}</span>
                                </span>
                            </td>
                            <td>
                                <span class="p-r-sm">
                                    <i class="cursor fa fa-file-o" ng-click="viewObject(showGroupEvent,value,allSessionEvent)" uib-tooltip="{{'tooltip.viewObject' | translate}}"></i>

                                </span>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="text-center text m-t m-b h6 text-uppercase" ng-if="!allSessionEvent.group || allSessionEvent.group.length==0" translate>
                    message.noNotificationFound
                </div>
            </div>
        </li>
    </ul>

    <!-- navbar collapse -->
    <div class="collapse navbar-toggleable-custom" id="navbar1">
        <!-- search form -->
<!--        <form class="navbar-form form-inline pull-right navbar-item m-r" role="search">
            <div class="l-h">
                <input type="search" ng-model-options="{ debounce: 100 }" ng-model="filterString" placeholder="{{'placeholder.search'| translate}}">
            </div>
        </form>-->
        <!-- / search form -->
        <!-- link -->
        <ul class="nav navbar-nav navbar-nav-inline text-center pull-left nav-active-border b-orange">
            <li class="nav-item">
                <a class="nav-link" ui-sref="app.dashboard" ui-sref-active="active">
                    <span class="nav-text">
                         <i class="fa fa-dashboard text-white dashboard-icon" ></i>
                        <span id="dashboard_id" class="font11 text-white text-u-c _600" translate>label.dashboard</span>
                    </span>
                </a>
            </li>
            <li class="nav-item" ng-if="permission.DailyPlan.view.status">
                <a class="nav-link" ui-sref="app.dailyPlan" ui-sref-active="active">
                    <span class="nav-text">
                         <img src="images/daily_plan.png" width="15" height="16">
                        <span id="dailyPlan_id" class="font11 text-white text-u-c _600" translate>label.dailyPlan</span>
                    </span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" ui-sref="app.jobChain" ui-sref-active-eq="active">
                    <span class="nav-text ">
                        <i class="fa fa-chain text-white jobchain-icon"></i>
                        <span id="jobChain_id" class="font11 text-white text-u-c _600" translate>label.jobChains</span>
                    </span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" ui-sref="app.orders" ui-sref-active="active">
                    <span class="nav-text ">
                        <img src="images/order1.png" width="18" height="22" class="order-icon">
                        <span id="orders_id" class="font11 text-white text-u-c _600" translate>label.orders</span>
                    </span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" ui-sref="app.jobs" ui-sref-active="active">
                    <span class="nav-text ">
                        <img src="images/job1.png" width="22" height="21" class="job-icon">
                        <span id="jobs_id" class="font11 text-white text-u-c _600" translate>label.jobs</span>
                    </span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" ng-click="navigateToResource()" ui-sref-active-eq="active">
                    <span class="nav-text" >
                        <img src="images/resources.png">
                        <span class="font11 text-white text-u-c _600" translate>label.resources</span>
                    </span>
                    <span class="hide" ui-sref="app.resources.agentClusters"></span>
                    <span class="hide" ui-sref="app.resources.locks"></span>
                    <span class="hide" ui-sref="app.resources.processClasses"></span>
                    <span class="hide" ui-sref="app.resources.schedules"></span>
                </a>

            </li>
            <li class="nav-item" ng-if="permission.History.view">
                <a class="nav-link" ui-sref="app.history" ui-sref-active="active">
                    <span class="nav-text">
                        <i class="fa fa-history text-white history-icon"></i>
                        <span class="font11 text-white text-u-c _600" translate>label.history</span>
                    </span>
                </a>
            </li>
        </ul>
        <!-- end link -->
    </div>
    <!-- / navbar collapse -->
</div>
<script type="text/javascript">
    $("#notification").click(function (e) {
        e.stopPropagation();
    });
</script>
