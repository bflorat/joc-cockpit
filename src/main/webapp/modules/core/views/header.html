
<div class="navbar box-shadow-z0 p-l-0 p-r-20">
    <a data-toggle="collapse" data-target="#navbar1" class="navbar-item pull-right hide-menubar m-a-0 m-l">
        <i class="fa fa-navicon text-white"></i>
    </a>
    <!-- brand -->
    <a class="navbar-brand white ">
        <img src="images/jobscheduler-logo.png" alt=".">
    </a>
    <!-- / brand -->

    <!-- nabar right -->
    <ul class="nav navbar-nav pull-right ">

        <li class="nav-item dropdown">
            <a class="nav-link text-white" data-toggle="dropdown">
             <span class="avatar w-32">
                <letter-avatar shape="round" width="30" height="30" data="{{username}}"></letter-avatar>
              </span>
              <span class="text-left p-l-xs">
                    <span class="_500 text-md" ng-bind="username"></span>
                    <i class="fa fa-caret-down p-l-xs"></i>
              </span>
            </a>
            <div class="dropdown-menu pull-right dropdown-ac">
                <a class="dropdown-item" ui-sref="app.profile">
                    <s class="fa fa-user"></s>
                    {{'button.profile' | translate}}
                </a>
                <a class="dropdown-item" ui-sref="app.setting">
                    <i class="fa fa-cog"></i>
                    {{'button.setting' | translate}}
                </a>
                <a class="dropdown-item" ng-click="logout();$event.stopPropagation()">
                    <i class="fa fa-sign-out"></i>
                    {{'button.logOut' | translate}}
                </a>
            </div>
        </li>
    </ul>
    <!-- / navbar right -->

    <ul class="nav navbar-nav pull-right " style="padding-right: 20px">

        <li class="nav-item dropdown">
            <a class="nav-link text-white" data-toggle="dropdown" ng-click="updateAllEvent(allSessionEvent)">

              <span class="text-left p-l-xs">
                   <span class="label label-sm up notification" ng-if="allSessionEvent.length>0"
                         ng-bind="allSessionEvent.length"></span>
                    <i class="fa fa-lg fa-bell-o fa-grey"></i>

              </span>
            </a>

            <div class="dropdown-menu pull-right dropdown-ac">

                <div class="scrollable" style="max-height: 300px;width: 700px ;margin-left: 10px">
                    <h5 style="margin: 8px 0px 0px 2px"><span>Notifications </span></h5>
                    <hr>
                    <table class="table-hover" style="margin-left: 10px; margin-bottom: 1rem">
                        <tbody ng-repeat="group in allSessionEvent">
                        <tr>
                            <td ng-click="expandNotification(group)" style="cursor: pointer ; width:600px">
                                <span ng-if="!group.read && (group.show==false  || group.show==undefined)" style="font-weight:bold">
                                {{group.events.length}} new events on {{group.jobschedulerId}} <span class="text-capitalize">{{group.objectType | lowercase}}</span>  {{group.path}} {{(group.eventId/1000) | timeDifference}}
                                </span>
                                 <span ng-if="!group.read && group.show==true">
                                {{group.events.length}} new events on {{group.jobschedulerId}} <span class="text-capitalize">{{group.objectType | lowercase}}</span>  {{group.path}} {{(group.eventId/1000) | timeDifference}}</span>
                                <span ng-if="group.read">
                                {{group.events.length}} new events on {{group.jobschedulerId}} <span class="text-capitalize">{{group.objectType | lowercase}}</span>  {{group.path}} {{(group.eventId/1000) | timeDifference}}</span>

                                <i class="cursor fa fa-caret-right  noExl"
                                   ng-if="group.show==false || group.show==undefined"></i>
                                <i class="cursor fa  fa-caret-down noExl" ng-if="group.show==true"></i>
                            </td>
                        </tr>
                        <tr ng-repeat="value in group.events" ng-show="group.show">
                            <td> <span style="padding: 0px 0px 0px 32px"><span class="text-capitalize">{{value.objectType | lowercase}}</span> {{value.path | splitString}} {{value.eventType}}
                             <span>{{(value.eventId/1000) | date:'dd-MM-yyyy HH:mm:ss'}}</span></span>
                            </td>
            <!--                <td style="float: right" >
  <span uib-tooltip="view order" style="">
    <i class="cursor fa fa-bars" aria-hidden="true"></i>
</span>
    <span uib-tooltip="view history" style="margin-left: 1px">
<i class="cursor fa fa-history" aria-hidden="true"></i>
    </span>
        <span uib-tooltip="show log" style="margin-left: 1px">
    <i class=" cursor fa fa-file-o" aria-hidden="true"></i>
</span>
                            </td>-->
                        </tr>
                        </tbody>
                    </table>


                </div>
            </div>
        </li>
    </ul>


    <!-- navbar collapse -->
    <div class="collapse navbar-toggleable-custom" id="navbar1">
        <!-- search form -->
<!--        <form class="navbar-form form-inline pull-right navbar-item m-r" role="search">
            <div class="l-h">
                <input type="search" ng-model-options="{ debounce: 100 }" ng-model="filterString" placeholder="{{'placeholder.search'| translate}}">
            </div>
        </form>-->
        <!-- / search form -->
        <!-- link -->
        <ul class="nav navbar-nav navbar-nav-inline text-center pull-left nav-active-border b-orange">
            <li class="nav-item">
                <a class="nav-link" ui-sref="app.dashboard" ui-sref-active="active">
                    <span class="nav-text">
                         <i class="fa fa-dashboard text-white dashboard-icon" ></i>
                        <span id="dashboard_id" class="font11 text-white text-u-c _600" translate>label.dashboard</span>
                    </span>
                </a>
            </li>
            <li class="nav-item" ng-if="permission.DailyPlan.view.status">
                <a class="nav-link" ui-sref="app.dailyPlan" ui-sref-active="active">
                    <span class="nav-text">
                         <img src="images/daily_plan.png" width="15" height="16">
                        <span id="dailyPlan_id" class="font11 text-white text-u-c _600" translate>label.dailyPlan</span>
                    </span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" ui-sref="app.jobChain" ui-sref-active-eq="active">
                    <span class="nav-text ">
                        <i class="fa fa-chain text-white jobchain-icon"></i>
                        <span id="jobChain_id" class="font11 text-white text-u-c _600" translate>label.jobChains</span>
                    </span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" ui-sref="app.orders" ui-sref-active="active">
                    <span class="nav-text ">
                        <img src="images/order1.png" width="18" height="22" class="order-icon">
                        <span id="orders_id" class="font11 text-white text-u-c _600" translate>label.orders</span>
                    </span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" ui-sref="app.jobs" ui-sref-active="active">
                    <span class="nav-text ">
                        <img src="images/job1.png" width="22" height="21" class="job-icon">
                        <span id="jobs_id" class="font11 text-white text-u-c _600" translate>label.jobs</span>
                    </span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" ng-click="navigateToResource()" ui-sref-active-eq="active">
                    <span class="nav-text" >
                        <img src="images/resources.png">
                        <span class="font11 text-white text-u-c _600" translate>label.resources</span>
                    </span>
                    <span class="hide" ui-sref="app.resources.agentClusters"></span>
                    <span class="hide" ui-sref="app.resources.locks"></span>
                    <span class="hide" ui-sref="app.resources.processClasses"></span>
                    <span class="hide" ui-sref="app.resources.schedules"></span>
                </a>

            </li>
            <li class="nav-item" ng-if="permission.History.view">
                <a class="nav-link" ui-sref="app.history" ui-sref-active="active">
                    <span class="nav-text">
                        <i class="fa fa-history text-white history-icon"></i>
                        <span class="font11 text-white text-u-c _600" translate>label.history</span>
                    </span>
                </a>
            </li>
        </ul>
        <!-- end link -->
    </div>
    <!-- / navbar collapse -->
</div>
<script type="text/javascript">
    $('.dropdown-menu').click(function (e) {
        e.stopPropagation();
    });
</script>
