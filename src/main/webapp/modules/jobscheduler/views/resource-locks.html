<div class="hide-block sidebar-btn resize-cursor">
    <i class="fa fa-angle-double-right p-l-sm" ng-click="showLeftPanel()"></i>
</div>
 <div id="leftPanel" class="leftPanel" resizable r-directions="['right']" r-width="270">
     <div>
         <button class="btn btn-grey btn-sm" ng-click="my_tree_lock.expand_all();expandAllL();" >
             <i class="fa fa-angle-down fa-lg"></i>
             <span translate>button.expandAll</span>
         </button>
         <button class="btn btn-grey btn-sm m-l-xs" ng-click="my_tree_lock.collapse_all();" >
             <i class="fa fa-angle-up fa-lg"></i>
             <span translate>button.collapseAll</span>
         </button>
         <a class="text m-l-xs resize-cursor"><i class="fa fa-angle-double-left fa-lg" ng-click="hidePanel()"></i></a>
         <tree tree-data="treeLock"
               tree-control="my_tree_lock"
               expand-to="expand_to"
               expand-on="expanding_schedule_property"
               on-select="treeHandler1L(branch)"
               on-click="treeHandlerL(branch)"
               expand-node="expandNodeL(branch)"
               collapse-node="collapseNodeL(branch)"
               template-url="modules/jobscheduler/views/lock-tree.html">
         </tree>
     </div>
 </div>
<div id="rightPanel1">
<div class="hide" ng-class="{'show': isLoading}">
    <div class="hide row m-t-sm" ng-class="{'show': pageView=='grid'}">
        <div ng-repeat="branch in branchsL">
            <div class="col-sm-12" ng-if="branch.path" style="margin-bottom: 10px">
                <span class="text inline"><i class="fa fa-folder-o"></i> {{::branch.path}}</span>
            </div>
            <div class="col-xxl-2 col-lg-3 col-md-4 col-sm-6 col-xs-12 hide" ng-class="{'show': pageView=='grid'}" ng-repeat="lock in filtered = (branch.locks | filter: filterString:strict)">
                <div class="box card">
                    <div class="box-body">
                        <div>
                            <a ng-click="showConfiguration('lock',lock.path,lock.name)" class="text-left primary-text-hover-color">
                                <i class="fa fa-lock text-sm"></i><span ng-bind="lock.path"></span>
                            </a>
                        </div>
                        <div class="text-sm  text-left text-muted p-t-sm" ><span class="text-black _600" ng-bind="lock.maxNonExclusive || '0'"></span> {{'label.maxTask' | translate}}</div>
                        <div class="text-sm  text-left text-muted p-t-xs" ><span class="text-black _600" ng-bind="lock.holders.tasks.length || '0'"></span> {{'label.runningTask' | translate}}</div>
                        <div class="text-sm  text-left text-muted p-t-xs" ><span class="text-black _600" ng-bind="lock.queue.length || '0'"></span> {{'label.waitingTask' | translate}}</div>
                    </div>

                </div>
            </div>
        </div>
        <div ng-if="isLoading && branch.locks.length==0" class="text-center m-t h6 text-uppercase"  translate>message.noLocksFound</div>
        <div class="text-center m-t text-uppercase hide text-orange" ng-class="{'show': (filtered.length===0 && branch.locks.length !==0)}"  translate>message.noDataMatched</div>
    </div>
    <div class="m-t-sm box p-a" ng-show="pageView=='list'">
        <div class="table-responsive">
                <table class="table table-hover table-bordered  ">
                    <thead>
                    <tr>
                        <th ng-click="sortBy('name')"><a><span translate>label.lockName</span>
                            <i ng-show="propertyName == 'name' && !reverse"
                               class="fa fa-caret-down "></i>
                            <i ng-show="propertyName == 'name' && reverse"
                               class="fa fa-caret-up "></i></a>
                        </th>
                        <th ng-click="sortBy('path')"><a><span translate>label.path</span>
                            <i ng-show="propertyName == 'path' && !reverse"
                               class="fa fa-caret-down "></i>
                            <i ng-show="propertyName == 'path' && reverse"
                               class="fa fa-caret-up "></i></a>
                        </th>
                        <th ng-click="sortBy('status')"><a><span translate>label.status</span>
                            <i ng-show="propertyName == 'status' && !reverse"
                               class="fa fa-caret-down "></i>
                            <i ng-show="propertyName == 'status' && reverse"
                               class="fa fa-caret-up "></i></a>
                        </th>
                        <th ng-click="sortBy('maxNonExclusive')"><a><span translate>label.maxNonExclusive</span>
                            <i ng-show="propertyName == 'maxNonExclusive' && !reverse"
                               class="fa fa-caret-down "></i>
                            <i ng-show="propertyName == 'maxNonExclusive' && reverse"
                               class="fa fa-caret-up "></i></a>
                        </th>
                        <th ng-click="sortBy('holders.tasks.length')"><a><span translate>label.numberLockHolder</span>
                            <i ng-show="propertyName == 'holders.tasks.length' && !reverse"
                               class="fa fa-caret-down "></i>
                            <i ng-show="propertyName == 'holders.tasks.length' && reverse"
                               class="fa fa-caret-up "></i></a>
                        </th>
                        <th ng-click="sortBy('queue.length')"><a><span translate>label.numberQueued</span>
                            <i ng-show="propertyName == 'queue.length' && !reverse"
                               class="fa fa-caret-down "></i>
                            <i ng-show="propertyName == 'queue.length' && reverse"
                               class="fa fa-caret-up "></i></a>
                        </th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody ng-repeat="branch in branchsL">
                    <tr ng-repeat="lock in filtered = (branch.locks | filter: filterString:strict) | orderBy: filter.sortBy:sortReverse | startFrom:(currentPage - 1) * pageSize | limitTo: pageSize">
                        <td ng-bind="lock.name || '-'"></td>
                        <td ><a class="primary-text-hover-color" ng-click="showConfiguration('lock',lock.path,lock.name)" >{{lock.path}}</a></td>
                        <td ng-bind="lock.status || '-'"></td>
                        <td ng-bind="lock.maxNonExclusive || '0'"></td>
                        <td ng-bind="lock.holders.tasks.length || '0'"></td>
                        <td ng-bind="lock.queue.length || '0'"></td>
                    </tr>
                    </tbody>
                </table>
                <ul ng-show="filtered.length > pageSize" uib-pagination total-items="filtered.length" ng-model="currentPage" items-per-page='pageSize' class="pagination-sm m-t-0" max-size="5" boundary-link-numbers="true" rotate="false" previous-text="Prev"></ul>
                <div class="pull-right" ng-show="filtered.length > 10">
                    <div class="btn-group m-r-xxs">
                        <button class="btn btn-default white btn-sm" ng-model="pageSize" uib-btn-radio="'10'"
                                ng-class="{'primary': pageSize=='10'}" >10
                        </button>
                        <button class="btn btn-default white btn-sm" ng-model="pageSize" uib-btn-radio="'25'"
                                ng-class="{'primary': pageSize=='25'}" >25
                        </button>
                        <button class="btn btn-default white btn-sm" ng-model="pageSize" uib-btn-radio="'50'"
                                ng-class="{'primary': pageSize=='50'}" >50
                        </button>
                        <button class="btn btn-default white btn-sm" ng-model="pageSize" uib-btn-radio="'100'"
                                ng-class="{'primary': pageSize=='100'}">100
                        </button>
                    </div>
                </div>
            </div>
            <div ng-if="isLoading && branch.locks.length==0" class="text-center m-t h6 text-uppercase"  translate>message.noLocksFound</div>
    <div class="text-center m-t text-uppercase hide text-orange" ng-class="{'show': (filtered.length===0 && branch.locks.length !==0)}"  translate>message.noDataMatched</div>
    </div>

</div>
<div ng-if="!isLoading" class="text-center m-t-lg"><div class="cssload-loading">{{'label.loading' | translate}}...</div></div>
</div>

<script>

      $(document).ready(function () {
      $('#leftPanel').stickySidebar({
            sidebarTopMargin: 190
        });
  });
</script>
