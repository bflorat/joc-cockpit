<div class="white box-shadow sub-header">
    <div class="row">
        <div class="col-md-12">
            <div class="padding">
                <div class="text-right ">
                     <div class="pull-left">
                        <span class="text-md text-orange _600 p-t-xs text-c" ncy-breadcrumb></span>
                    </div>
                    <div class="inline" ng-class="{'hide':object.orders.length>0}">
                        <div class="btn-group hidden-btn-group">
                            <button class="btn btn-grey btn-sm" ng-model="filter.state" uib-btn-radio="'all'"
                                    ng-class="{'btn-primary': filter.state=='all'}" ng-click="load()" translate>button.allOrders
                            </button>
                            <button class="btn btn-grey btn-sm" ng-model="filter.state"
                                    uib-btn-radio="'running'"
                                    ng-class="{'btn-primary': filter.state=='running'}" ng-click="load()" translate>button.running
                            </button>
                            <button class="btn btn-grey btn-sm" ng-model="filter.state"
                                    uib-btn-radio="'suspended'"
                                    ng-class="{'btn-primary': filter.state=='suspended'}" ng-click="load()" translate>button.suspended
                            </button>
                            <button class="btn btn-grey btn-sm" ng-model="filter.state"
                                    uib-btn-radio="'setback'"
                                    ng-class="{'btn-primary': filter.state=='setback'}" ng-click="load()" translate>button.setback
                            </button>
                        </div>
                        <div class="btn-group dropdown hidden-dropdown">
                            <button class="btn btn-grey btn-sm m-l-sm dropdown-toggle" data-toggle="dropdown" translate>label.status</button>
                            <div class="dropdown-menu dropdown-menu-scale dropdown-ac dropdown-more pull-right">
                                <a class="dropdown-item" ng-model="filter.state" uib-btn-radio="'all'"
                                    ng-class="{'btn-primary': filter.state=='all'}" ng-click="load()" translate>button.allOrders
                                </a>
                                <a class="dropdown-item" ng-model="filter.state"
                                        uib-btn-radio="'running'"
                                        ng-class="{'btn-primary': filter.state=='running'}" ng-click="load()" translate>button.running
                                </a>
                                <a class="dropdown-item" ng-model="filter.state"
                                        uib-btn-radio="'suspended'"
                                        ng-class="{'btn-primary': filter.state=='suspended'}" ng-click="load()" translate>button.suspended
                                </a>
                                <a class="dropdown-item" ng-model="filter.state"
                                        uib-btn-radio="'setback'"
                                        ng-class="{'btn-primary': filter.state=='setback'}" ng-click="load()" translate>button.setback
                                </a>
                            </div>
                        </div>
                        <div class="btn-group dropdown">
                            <a id="sortby_id" class="btn btn-grey btn-sm m-l-sm" data-toggle="dropdown"><span translate>label.sortBy</span> <span class="text-primary">
                                <span  ng-show="filter.sortBy =='orderId'">
                                     {{'label.orderId' | translate}}
                                    <i ng-show="!sortReverse" class="fa fa-caret-down"></i>
                                    <i ng-show="sortReverse" class="fa fa-caret-up"></i>
                                </span>
                                <span ng-show="filter.sortBy =='processingState._text'">
                                     {{'label.status' | translate}}
                                   <i ng-show="!sortReverse" class="fa fa-caret-down"></i>
                                    <i ng-show="sortReverse" class="fa fa-caret-up"></i>
                                    </span>
                                <span  ng-show="filter.sortBy =='startedAt'">
                                     {{'label.date' | translate}}
                                  <i ng-show="!sortReverse" class="fa fa-caret-down"></i>
                                    <i ng-show="sortReverse" class="fa fa-caret-up"></i>
                                    </span>
                                </span> </a>
                            <div class="dropdown-menu dropdown-ac dropdown-more pull-right">
                                <a id="orderid_id" class="dropdown-item" ng-click="mainSortBy1('orderId')" translate>label.orderId</a>
                                <a  id="status_id" class="dropdown-item" ng-click="mainSortBy1('processingState._text')" translate>label.status</a>
                                <a id="date_id" class="dropdown-item" ng-click="mainSortBy1('startedAt')" translate>label.date</a>
                            </div>
                        </div>
                        <div class="btn-group dropdown">
                            <button class="btn btn-grey btn-sm m-l-sm dropdown-toggle" data-toggle="dropdown">{{'label.filters' | translate}} <span class="text-primary" ng-bind="savedOrderFilter.selected"></span></button>
                            <div class="dropdown-menu dropdown-menu-scale dropdown-ac dropdown-more pull-right">
                                <a class="dropdown-item" ng-click="applyFilter()" translate>label.createFilter</a>
                                <a class="dropdown-item" ng-click="editFilters()" ng-if="savedOrderFilter.list.length>0" translate>label.editExistingFilters</a>
                                <div class="dropdown-divider" ng-if="savedOrderFilter.list.length>0"></div>
                                <a class="dropdown-item" ng-class="{orange: savedOrderFilter.selected == filter.name}" ng-click="changeFilter(filter.name)" ng-repeat="filter in savedOrderFilter.list track by $index">
                                    {{filter.name}} <i ng-click="changeFilter();$event.stopPropagation();" ng-if="savedOrderFilter.selected == filter.name" class="fa fa-times-circle-o remove"></i>
                                </a>
                            </div>
                        </div>
                        <button class="btn btn-grey btn-sm m-l-sm" uib-tooltip="{{'tooltip.exportInXLS' | translate}}" ng-disabled="filtered.length===0" id="exportToExcelBtn" ng-click="exportToExcel()"><img src="images/share.png" class="p-b-xs"> </button>
                     </div>

                     <div class="hide" ng-class="{'show-block':object.orders.length>0}">
                          <button class="btn btn-grey btn-sm m-l-sm bg-hover-color" ng-click="reset()"> <span class="hidden-sm-down" translate>button.reset</span></button>
                         <button class="hide btn btn-grey btn-sm m-l-sm bg-hover-color" ng-class="{'show-block':permission.Order.delete.permanent}"
                                 ng-disabled="deletedSelected" ng-click="deleteAllOrder()"><i class="fa fa-trash"></i> <span class="hidden-sm-down" translate>button.deleteOrder</span></button>
                         <button class="hide btn btn-grey btn-sm m-l-sm" ng-class="{'show-block':permission.Order.suspend}"
                                 ng-disabled="suspendSelected" ng-click="suspendAllOrder()"><i class="fa fa-stop"></i> <span class="hidden-sm-down" translate>button.suspendOrder</span></button>
                         <button class="btn btn-grey btn-sm m-l-sm" ng-disabled="resetSelected" ng-click="resetAllOrder()"><i class="fa fa-repeat"></i> <span class="hidden-sm-down" translate>button.resetOrder</span></button>
                         <button class="hide btn btn-grey btn-sm m-l-sm" ng-class="{'show-block':permission.Order.start}"
                                 ng-disabled="runningSelected" ng-click="startAllOrder()"><i class="fa fa-play"></i> <span class="hidden-sm-down" translate>button.startOrderNow</span></button>
                     </div>
                     <toggle-view></toggle-view>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="scroll-y max-ht">
    <div class="padding p-b-0">
        <div class="m-t-sm">
            <div ui-include="'modules/order/views/orders-list.html'"></div>
        </div>
    </div>
</div>

<div class="modal fade" id="treeModal" tabindex="-1" role="dialog" aria-labelledby="user" data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body p-a" style="height: 550px; overflow: auto">
                <div class="form-group row">
                    <div class="col-sm-10">
                      <input type="text" class="form-control" placeholder="Add path" ng-model="jobFilterPath" readonly>
                    </div>
                    <div class="col-sm-1  p-l-0 p-t-sm"><a href="" ng-click="addPath(jobFilterPath)"><i class="fa fa-plus fa-lg"></i></a></div>
                </div>
                <div class="row" ng-if="paths.length>0">
                    <div class="col-sm-10">
                        <table class="table table-bordered" style="min-height: 100px;">
                            <tbody>
                            <tr ng-repeat="path in paths track by $index">
                                <td>{{path}}
                                    <a class="pull-right" ng-click="removePath($index)"><i class="fa fa-times"></i></a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div>
                    <a class="text m-r-xs " ng-click="filter_tree.expand_all();">[ <span
                            class="text-primary font14" translate>button.expandAll</span> ]</a>
                    <a class="text" ng-click="filter_tree.collapse_all()">[ <span class="text-primary font14" translate>button.collapseAll</span>
                        ]</a>
                    <tree
                            tree-data="filterTree"
                            tree-control="filter_tree"
                            expand-to="expand_to"
                            icon-leaf     = "fa fa-folder-o"
                            icon-expand   = "fa fa-folder"
                            icon-collapse = "fa fa-folder-open"
                            expand-on="expanding_property"
                            on-select="treeExpand(branch)"
                            on-click="treeExpand(branch)"
                            template-url="modules/core/template/tree-filter-structure.html">
                    </tree>
                </div>
            </div>
            <div class="modal-footer ">
                <button type="button" class="btn btn-primary btn-sm pull-left" ng-click="addJobChainPaths()" data-dismiss="modal" translate>button.done</button>
                <button type="button" class="btn btn-grey btn-sm pull-left" data-dismiss="modal" translate>button.cancel</button>
            </div>
        </div>
    </div>
</div>
